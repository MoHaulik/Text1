<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Text Copier</title>
    <script src="https://www.gstatic.com/firebasejs/9.19.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.19.1/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.19.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.19.1/firebase-database.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 0;
            padding: 20px;
        }
        textarea {
            width: 90%;
            height: 150px;
            font-size: 16px;
            margin-bottom: 10px;
        }
        button {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>Live Text Copier</h1>
    <textarea id="textInput" placeholder="Skriv her..."></textarea>
    <br>
    <button onclick="copyText()">Kopier</button>
    <p id="status" style="color: green; margin-top: 10px;"></p>

    <script>
      // Firebase-konfiguration
      const firebaseConfig = {
          apiKey: "AIzaSyAoY_XxClJRTUS6OJmaIDvZm014Lx7sXA4",
          authDomain: "copypaste2000-5776c.firebaseapp.com",
          databaseURL: "https://copypaste2000-5776c-default-rtdb.firebaseio.com",
          projectId: "copypaste2000-5776c",
          storageBucket: "copypaste2000-5776c.firebasestorage.app",
          messagingSenderId: "733249598043",
          appId: "1:733249598043:web:6648bfe9b408127aa6457e",
          measurementId: "G-M16KES53R6"
      };

      // Initialiser Firebase
      const app = firebase.initializeApp(firebaseConfig);
      const analytics = firebase.getAnalytics(app);

      // Log ind anonymt
      const auth = firebase.auth();
      auth.signInAnonymously()
          .then(() => {
              console.log("Anonym login succesfuldt!");
          })
          .catch((error) => {
              console.error("Fejl ved anonym login:", error);
          });

      // Realtime Database
      const database = firebase.database();
      const textRef = database.ref('sharedText');

      // Lyt efter Ã¦ndringer og opdater tekstfeltet
      textRef.on('value', (snapshot) => {
          document.getElementById('textInput').value = snapshot.val() || '';
      });

      // Gem teksten til databasen
      const textArea = document.getElementById("textInput");
      textArea.addEventListener('input', () => {
          textRef.set(textArea.value);
      });

      // Kopier til clipboard
      function copyText() {
          textArea.select();
          document.execCommand("copy");
          document.getElementById("status").innerText = "Teksten er kopieret!";
          setTimeout(() => {
              document.getElementById("status").innerText = "";
          }, 2000);
      }
    </script>
</body>
</html>
